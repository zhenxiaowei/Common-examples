<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="jp.co.sas.cms.bizshare.dao.AametaDao">
	<resultMap type="jp.co.sas.cms.bizshare.dto.AaMetaDto" id="AaMetaBean">
		<result column="meta_id" property="metaId" />
		<result column="meta_name" property="metaName" />
		<result column="data_type" property="dataType" />
		<result column="meta_mst_id" property="metaMstId" />
		<result column="comment" property="comment" />
		<result column="update_user_id" property="updateUserId" />
		<result column="create_datetime" property="createDatetime" />
		<result column="update_datetime" property="updateDatetime" />
	</resultMap>
		<select id="metaMstById" resultMap="AaMetaBean"  parameterType="String">
		SELECT *
		FROM aa_meta
		where
		meta_mst_id=#{metaMstId}
	</select>
	<select id="metaById" resultMap="AaMetaBean"   parameterType="String" >
		SELECT *
		FROM aa_meta
		where
		meta_id=#{metaId}
	</select>
	<update id="updateMeta" parameterType="jp.co.sas.cms.bizshare.dto.AaMetaDto">
		<![CDATA[
			update aa_meta  set meta_name=#{metaName},data_type=#{dataType},meta_mst_id=#{metaMstId},
			comment=#{comment},update_datetime=#{updateDatetime},update_user_id=#{updateUserId}
			]]>	
		<![CDATA[
			where meta_id=#{metaId}
		]]>
	</update>
	<select id="selectAaMeta" resultType="jp.co.sas.cms.bizshare.dto.AaMetaDto"
		parameterType="String">
		SELECT meta_id metaId,meta_name
		metaName,data_type dataType,meta_mst_id metaMstId,comment
		comment,update_user_id updateUserId,create_datetime
		createDatetime,update_datetime updateDatetime
		FROM aa_meta
		WHERE trim(meta_name)=#{metaName}
	</select>
	<delete id="deleteByMetaId" parameterType="String">
		DELETE FROM
		aa_meta
		WHERE meta_id=#{metaId}
	</delete>
	<select id="metaList" resultMap="AaMetaBean">
		SELECT a.*
		FROM aa_meta  a,aa_col_list  b  
		 where a.meta_id=b.col_id  
		order by   b.display_order   asc
	</select>
	<insert id="aaMetaRegister" parameterType="jp.co.sas.cms.bizshare.dto.AaMetaDto">
		INSERT INTO aa_meta
		(meta_id
		<if test="metaName!=null and metaName!=''">
		,meta_name
		</if>
		<if test="dataType!=null and dataType!=''">
		,data_type
		</if>
		<if test="comment!=null and comment!=''">
		,comment
		</if>
		<if test="metaMstId!=null and metaMstId!=''">
		,meta_mst_id
		</if>
		<if test="updateUserId!=null and updateUserId!=''">
		,update_user_id
		</if>
		<if test="createDatetime!=null and createDatetime!=''">
		,create_datetime
		</if>
		<if test="updateDatetime!=null and updateDatetime!=''">
		,update_datetime
		</if>
		)
		VALUES
		(
		#{metaId},
		<if test="metaName!=null and metaName!=''">
		#{metaName},
		</if>
		<if test="dataType!=null and dataType!=''">
		#{dataType},
		</if>
		<if test="comment!=null and comment!=''">
		#{comment},
		</if>
		<if test="metaMstId!=null and metaMstId!=''">
		#{metaMstId},
		</if>
		<if test="updateUserId!=null and updateUserId!=''">
		#{updateUserId},
		</if>
		<if test="createDatetime!=null and createDatetime!=''">
		#{createDatetime},
		</if>
		<if test="updateDatetime!=null and updateDatetime!=''">
		#{updateDatetime}
		</if>
		)
	</insert>
</mapper>